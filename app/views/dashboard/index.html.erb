<% content_for :title, "Dashboard" %>

<div class="container mt-4">
  <div class="row">
    <div class="col-md-12">
      <h1 class="mb-4">Dashboard de Orçamento Familiar</h1>
    </div>
  </div>

  <!-- Resumo Financeiro do Mês Atual -->
  <div class="row mb-4">
    <div class="col-md-4">
      <div class="card text-white bg-success">
        <div class="card-header">
          <i class="fas fa-arrow-up"></i> Receitas do Mês
        </div>
        <div class="card-body">
          <h4 class="card-title">R$ <%= number_with_delimiter(@current_month_income, delimiter: '.', separator: ',') %></h4>
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="card text-white bg-danger">
        <div class="card-header">
          <i class="fas fa-arrow-down"></i> Despesas do Mês
        </div>
        <div class="card-body">
          <h4 class="card-title">R$ <%= number_with_delimiter(@current_month_expenses, delimiter: '.', separator: ',') %></h4>
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="card text-white <%= @current_month_balance >= 0 ? 'bg-primary' : 'bg-warning' %>">
        <div class="card-header">
          <i class="fas fa-balance-scale"></i> Saldo do Mês
        </div>
        <div class="card-body">
          <h4 class="card-title">R$ <%= number_with_delimiter(@current_month_balance, delimiter: '.', separator: ',') %></h4>
        </div>
      </div>
    </div>
  </div>

  <!-- Botões de Ação -->
  <div class="row mb-4">
    <div class="col-md-12">
      <h3>Adicionar Transação</h3>
      <div class="btn-group" role="group">
        <button type="button" class="btn btn-success btn-lg" data-bs-toggle="modal" data-bs-target="#incomeModal">
          <i class="fas fa-plus-circle"></i> Adicionar Receita
        </button>
        <button type="button" class="btn btn-danger btn-lg" data-bs-toggle="modal" data-bs-target="#expenseModal">
          <i class="fas fa-minus-circle"></i> Adicionar Despesa
        </button>
      </div>
    </div>
  </div>

  <!-- Placeholder para Gráfico -->
  <div class="row">
    <div class="col-md-6">
      <div class="card">
        <div class="card-header">
          <h5>Distribuição de Despesas por Categoria</h5>
        </div>
        <div class="card-body">
          <canvas id="expenseChart" width="400" height="400"></canvas>
          <p class="text-muted text-center mt-3">
            <em>Gráfico será implementado posteriormente com Chart.js</em>
          </p>
        </div>
      </div>
    </div>

    <div class="col-md-6">
      <div class="card">
        <div class="card-header">
          <h5>Evolução Mensal</h5>
        </div>
        <div class="card-body">
          <canvas id="monthlyChart" width="400" height="400"></canvas>
          <p class="text-muted text-center mt-3">
            <em>Gráfico será implementado posteriormente com Chart.js</em>
          </p>
        </div>
      </div>
    </div>
  </div>
</div>
<%= render 'dashboard/income_modal' %>
<%= render 'dashboard/expense_modal' %>
